<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="stylesheet" href="./style.css">
    <title>Currency Converter</title>
  </head>
  <body>
    <h2>Currency converter</h2>
    <div>
      <input type="number">
      <select></select>
    </div>
    <span>=</span>
    <div>
      <input type="number">
      <select></select>
    </div>
    
  </body>
  <script>
    const select =document.querySelectorAll('select');
    const input=document.querySelectorAll('input');
    const URL_API="https://api.exchangeratesapi.io/latest";
    html='';

    async function currency(){
      const res = await fetch(URL_API);
      const data= await res.json();
      const rates=data.rates;
      const arrKey=Object.keys(rates);
      arrKey.map(item => {
        return html+=`<option value=${item}>${item}</option>`;
      });
      for(let i=0;i<select.length;i++)
      {
        select[i].innerHTML=html;
      }
      function convert(i,j)
      {
        input[j].value=input[i].value*rates[select[j].value]/rates[select[i].value];
      }
      for(let c=0,d=1;c<=1;c++,d--)
      {
      input[c].addEventListener('keyup',()=>convert(c,d));
      select[c].addEventListener('change',()=>convert(c,d));
      }
     
    } 
    currency();



  </script>
</html>
